<!DOCTYPE html>
<html lang="es">

<head>
    <!--Metadatos-->
    <meta charset="UTF-8">
    <meta name="author" content="Beatriz R.">
    <meta name="description" content="Ejercicios-regEx">
    <meta name="keywords" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicio 2 - Restringir nombre de usuario</title>
</head>

<body>

    <body>
        <form id="formulario">
            <label for="usuario">Nombre de usuario:</label>
            <input type="usuario" id="usuario" name="usuario" required>
            <span id="errorusuario" style="color: red;"></span>
            <br><br>
            <label for="telefono">N√∫mero de tel√©fono:</label>
            <input type="text" id="telefono" name="telefono" required>
            <span id="errorTelefono" style="color: red;"></span>

            <button type="submit">Enviar</button>
        </form>

        <p id="resultado"></p>

        <script src="script.js"></script>
    </body>
    <script>
        /*
        Ejercicio 2 - Restringir nombre de usuario
        üìå Crea una validaci√≥n para nombres de usuario en un formulario.

        Solo puede contener letras, n√∫meros y guion bajo _
        Debe empezar con una letra
        Debe tener entre 5 y 15 caracteres
        üîπ Ejemplo de entradas v√°lidas:
        ‚úÖ usuario_123
        ‚úÖ Beatriz2024

        ‚ùå 123usuario (no empieza con letra)
        ‚ùå a (menos de 5 caracteres)*/

        let regEx = /^[A-Za-z√±√ë]\w{4,15}$/;
        //1. Selecciona el campo de nombre de usuario
        const nombreUsuario = document.getElementById("usuario");
        const errorNombre = document.getElementById("errorusuario");
        //2. Escucha el evento de entrada
        nombreUsuario.addEventListener('input', validarNombre);
        //validaciones extra:
        let largoNombre = /^.{5,15}/;
        let caracteresErroneos = /[^A-Za-z√±√ë0-9_]/;

        //Funci√≥n que valida el nombre de usuario
        function validarNombre(event) {
            if (!regEx.test(event.target.value)) {
                //Esto siempre debe pasar
                errorNombre.innerHTML = "<br>Nombre Usuario inv√°lido"
                errorNombre.style.color = "red";

                // Creo elementos para los errores
                const error1 = document.createElement('span');
                error1.setAttribute('id', 'error1');
                errorNombre.append(error1);
                const error2 = document.createElement('span');
                error2.setAttribute('id', 'error2');
                errorNombre.append(error2);

                if (!largoNombre.test(event.target.value)) {
                    error1.innerHTML = "<br>Debe tener entre 5 y 15 caracteres";
                    error1.style.color = "red";
                } else {
                    error1.innerHTML = "";
                    error1.style.color = "black";

                }
                if (caracteresErroneos.test(event.target.value)) {
                    error2.innerHTML = "<br>No puede tener nada que no sean letras, n√∫meros o gui√≥n bajo";
                    error2.style.color = "red";
                } else {
                    error2.innerHTML = "";
                    error2.style.color = "black";

                }
            } else {
                errorNombre.innerHTML = "Nombre de Usuario Correcto";
                errorNombre.style.color = "green";
            }

        }

    </script>
</body>

</html>